package cotizadorCursos;

import java.text.DecimalFormat;
import java.util.Scanner;

public class cotizadorCursos {

	public static void main(String[] args) {
		String fechaInicio , rutEmpresa;
		int esCliente , precioCurso = 0 , cursoCotizado , cantidadAlumnos , subtotal , precioFinal , continuar;		
		
		do {
			System.out.println(" == Bienvenido al Cotizador de Cursos == ");
			System.out.println(" == Ingrese el Rut de su empresa == ");
			Scanner entradaRut = new Scanner(System.in);
			rutEmpresa = entradaRut.next();
			System.out.println(" == Ingrese Fecha para inicio de estudios == ");
			Scanner entradaFecha = new Scanner(System.in);
			fechaInicio = entradaFecha.next();
			System.out.println(" == Ha contratado nuestros servicios anteriormente? == ");
			do {
				System.out.println(" == Escriba 1.-Si / 2.- No, según corresponda == ");
				Scanner entradaEsCliente = new Scanner(System.in);
				esCliente = entradaEsCliente.nextInt();
			} while ( esCliente < 1 || esCliente > 2);
					
							
			do {
				System.out.println(" == Elija el Curso que desea cotizar == ");
				for (int i = 1 ; i < 6 ; i++) {
					System.out.println(i + ".- " + "Curso " + i);
				}
				
				Scanner entradaCurso = new Scanner(System.in);
				cursoCotizado = entradaCurso.nextInt();
				
				switch (cursoCotizado) {
					case 1: 
						System.out.println(" == El Curso 1: tiene un valor de $350,000 por cada Alumno == ");
						precioCurso = 350000;
						break;
					case 2: 
						System.out.println(" == El Curso 1: tiene un valor de $450,000 por cada Alumno == ");
						precioCurso = 450000;
						break;
					case 3: 
						System.out.println(" == El Curso 1: tiene un valor de $300,000 por cada Alumno == ");
						precioCurso = 300000;
						break;
					case 4: 
						System.out.println(" == El Curso 1: tiene un valor de $500,000 por cada Alumno == ");
						precioCurso = 500000;
						break;
					case 5: 
						System.out.println(" == El Curso 1: tiene un valor de $450,000 por cada Alumno == ");
						precioCurso = 450000;
						break;
					default:
						System.out.println(" == Opción inválida == ");
						break;
				}
			} while (cursoCotizado < 1 || cursoCotizado > 5);
			
			do {
				System.out.println(" == Cuantos Alumnos desea Matricular? == ");
				System.out.println(" == El Mínimo es 2 Alumnos y el Máximo es 20 == ");
				Scanner entradaCantidadAlumnos = new Scanner(System.in);
				cantidadAlumnos = entradaCantidadAlumnos.nextInt();
				subtotal = precioCurso * cantidadAlumnos;
				precioFinal = (int) calculoDescuento (esCliente , cantidadAlumnos, subtotal);
				DecimalFormat precioFormateado = new DecimalFormat("###,###.##");
				
				if ( cantidadAlumnos < 2 || cantidadAlumnos > 20 ) {
					if( cantidadAlumnos == 1) {
						System.out.println(" == No es posible matricular a " + cantidadAlumnos + " Alumno == ");
					} else {
						System.out.println(" == No es posible matricular a " + cantidadAlumnos + " Alumnos == ");
					}
				} else {
					System.out.println(" == El precio a pagar es: $" + (precioFormateado.format(precioFinal)) + " == ");
				}
				
			} while ( cantidadAlumnos < 2 || cantidadAlumnos > 20 );
			do {
				System.out.println(" == Desea seguir cotizando? 1.-Si / 2.-No== ");
				Scanner entradaContinuar = new Scanner(System.in);
				continuar = entradaContinuar.nextInt();
				if ( continuar < 1 || continuar > 2) {
					System.out.println(" == Opción Inválida, intente nuevamente == ");
				}
			} while ( continuar < 1 || continuar > 2);
			
		} while ( continuar == 1 );		 				

	}
	
	public static long calculoDescuento (int esCliente, int cantidadAlumnos, int subtotal) {
		double descuentoCliente = 0;
		double descuentoAlumnos = 0;
		double descuentoTotal = 0;
		long precioFinal = 0;
		if ( esCliente == 1 ) {
			descuentoCliente = 0.05;	
		}
		if ( cantidadAlumnos >= 5 ) {
			descuentoAlumnos = 0.1;
			if ( cantidadAlumnos > 10 ) {
				descuentoAlumnos = 0.2;
			}
		}
		descuentoTotal = descuentoCliente + descuentoAlumnos;
		precioFinal = Math.round( subtotal * (1 - descuentoTotal) );
		return precioFinal;
	};

}
